{% extends "index.twig" %}

{% block content %}
<section class="content-wrapper main-content clear-fix">
    <hgroup class="title">
        <h1>Reservations</h1>
        <h2>List of reservations</h2>
    </hgroup>
    <p>
        <a href="/reservation/create" class="btn btn-success">Create New</a>
        <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
            Filter
        </button>
    <div class="collapse" id="collapseExample">
        <div class="well">
            <form>
                <div class="row">

                        <div class='col-md-2'>
                            <div class="form-group">
                                <div class='input-group date' id='filterDateStart'>
                                    <input type='date' class="form-control" />
                <span class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                </span>
                                </div>
                            </div>
                        </div>
                        <div class='col-md-2'>
                            <div class="form-group">
                                <div class='input-group date' id='filterDateEnd'>
                                    <input type='date' class="form-control" />
                <span class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                </span>
                                </div>
                            </div>
                        </div>

                    <div class="col-md-4 col-sm-12"><select class="form-control">
                            <option selected>Select restaurant</option>
                            <option>Tartu Kohvik</option>
                            <option>Pirita kohvik</option>
                            <option>Mustam√§e kohvik</option>
                        </select></div>
                    <div class="col-md-2 col-sm-12"><button type="button" class="btn btn-primary">Filter</button></div>
                    <script language="text/javascript">
                       // jQuery(function () {
                            jQuery('#filterDateStart').datetimepicker({
                                format:"dd.mm.yyyy"
                            });
                            jQuery('#filterDateEnd').datetimepicker({
                                useCurrent: false, //Important! See issue #1075
                                format:"dd.mm.yyyy"
                            });
                            jQuery("#filterDateStart").on("dp.change", function (e) {
                                jQuery('#filterDateEnd').data("DateTimePicker").minDate(e.date);
                            });
                            jQuery("#filterDateEnd").on("dp.change", function (e) {
                                jQuery('#filterDateStart').data("DateTimePicker").maxDate(e.date);
                            });
                      //  });
                    </script>

                </div>


            </form>
        </div>
    </div>


    </p>
    <table class="table table-hover">
        <thead>

            <th>Reservation</th>
            <th>Restaurant</th>
            <th>Client</th>
            <th>Duration</th>


            <th>Guests number</th>
            <th>Actions</th>
        </thead>
        {% for reservation in reservations %}
            <tr
                {% if reservation.status == "canceled" %}
                    class="canceled bg-danger"
                    {% elseif reservation.status == "created" %}
                    class="original bg-success"
                {% elseif reservation.status == "modified" %}
                    class="modified bg-warning"

                {% endif %}
            >
                <td>{{ reservation.reservationDatetime }}</td>
                <td>{{ reservation.restaurant.name }}</td>

                <td>{{ reservation.personName }}</td>
                <td>{{ reservation.duration }} h</td>
                <td>{{ reservation.guestsNumber }}</td>

                <td>
                    <a href="/reservation/edit/{{ reservation.id }}" class="btn btn-warning btn-xs">Edit</a> |
                    <a href="/reservation/details/{{ reservation.id }}" class="btn btn-default btn-xs">Details</a> |
                    <a href="/reservation/delete/{{ reservation.id }}" class="btn btn-danger btn-xs">Delete</a>
                </td>
            </tr>
        {% endfor %}
    </table>

</section>
{% endblock %}